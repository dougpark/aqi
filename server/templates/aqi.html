<!DOCTYPE HTML>
<html>

<body>
    <form id="aqi_form">
        <label>Aqi id:</label>
        <input type="text" id="aqi_id" name="aqi_id" />
        <br />
        <input type="submit" value="submit" />
    </form>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script type="text/javascript">
        $('#aqi_form').submit(function (e) {
            e.preventDefault();

            var data = {};
            var Form = this;

            // vanilla javascript method to get value by name
            data.sensor_id = document.getElementsByName('aqi_id')[0].value
            data.day_week = "Friday"

            console.log(data)

            $.ajax({
                type: 'POST',
                url: '/api/aqi',
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(data),
                context: Form,
                success: function (callback) {
                    console.log(callback)
                    console.log(callback.result);
                    console.log(callback.result.aqi)
                    result = callback.result
                    error = result.error
                    // Watch out for Cross Site Scripting security issues when setting dynamic content!
                    if (!error) {
                        $(this).text('Aqi: ' + result.aqi);
                    } else {
                        $(this).text('Error: ' + error);
                    }

                },
                error: function () {
                    $(this).html("error!");
                }
            });
        });
    </script>
</body>

</html>